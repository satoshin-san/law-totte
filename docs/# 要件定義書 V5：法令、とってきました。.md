要件定義書：法令、とってきました。 (Law-Totte)
1. プロジェクト概要
アプリ名: 🐶 法令、とってきました。

英語名: I fetched the laws.

コンセプト: 「AI（NotebookLM）のための法令あつめ、わたしが代わりにやっておきます。」

ターゲット: 建築実務者や法務担当者など、ITの専門家ではないがAIを活用したい層。

デザインテーマ:

頼れる相棒: ユーザーを助ける忠実な「わんこ」のような存在。

配色: 温かみのあるオレンジ (#FF8C00) と、目に優しいアイボリー (#FFFBF0)。

トーン: 専門用語を排除し、日常会話のような丁寧な言葉遣い。

2. システム要件
プラットフォーム: Streamlit (Python 3.10+)


外部連携: e-Gov 法令 API (Version 1) 


Base URL: https://laws.e-gov.go.jp/api/1/ 


3. 機能要件 (Functional Requirements)
A. 全法令リストの取得とキャッシュ
起動時処理:

アプリ起動直後に、法令名一覧取得API (lawlists/1) を実行する 。


取得したXMLデータから「法令名 (LawName)」と「法令ID (LawId)」を全件抽出する 。

キャッシュ: 毎回APIを叩くと遅いため、@st.cache_data を使用してデータを保持する。

B. 検索・フィルタリング (3ステップUI)
初心者が迷わないよう、画面構成をステップ式にする。

Step 1: ジャンルで絞り込む (フィルタリング)

以下のボタン (st.pills) を配置。

[すべて] [🏠 土地・建物] [💼 ビジネス] [🍀 生活] [🤝 社会] [🚓 警察] [🏛️ 行政]

挙動: ボタンを押すと、全法令リストから「関連キーワード（建築、都市、会社、労働など）」を含む法令のみを抽出する。

Step 2: 法令を選ぶ (検索)

st.multiselect を使用。

Step 1の結果を選択肢 (options) として表示する。

表示: 「🔍 現在 {n} 件の法令から検索できます」と件数を明示する。

Step 3: ダウンロード (NotebookLM最適化)

ZIPファイル生成ボタンを配置。

C. データ変換仕様 (対NotebookLM)
法令データ取得:

選択された LawId を使い、法令取得API (lawdata/{LawId}) を実行 。


画像処理 (ImageData):

APIから返却されるBase64エンコードされたZIPデータをデコード・解凍する 。


画像ファイル（.jpg, .gif等）を取り出し、Markdown内に ![図](images/fig1.jpg) の形式で埋め込む。

表処理 (AppdxTable):

別表データは画像化せず、Markdownのテーブル記法に変換してテキストとして保持する（AIの読解精度向上のため） 。

D. 便利な機能（マイセット管理）
配置: 初心者の邪魔にならないよう、st.expander（折りたたみ）の中に格納する。

タイトル: 「📂 便利な機能（いつものリストを保存・読込）」

機能:

保存: 現在選択されている法令リスト（名称・ID）をJSON形式でダウンロードする。

読込: 保存したJSONをアップロードし、選択状態を復元する。

4. UI/UX デザイン要件
カスタムCSS:

アプリ全体にアイボリー背景 (#FFFBF0) を適用。

ボタンや入力欄の角を丸くする（Border Radius）。

ヘッダーや重要ボタンにアクセントカラーのオレンジ (#FF8C00) を使用。

メッセージング:

処理中は「法令を探しています...🐶」「ZIPを作っています...」など、温かいメッセージを表示する。