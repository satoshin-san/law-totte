# 要件定義書 V5：法令、とってきました。

## 1. プロジェクト概要
- **アプリ名:** 「法令、とってきました。」
- **英語名:** I fetched the laws (Law-Totte)
- **コンセプト:** 「AIのための法令あつめ、わたしが代わりにやっておきます。」
- **世界観:**
    - ユーザーにとっての「頼れる執事」や「パートナー」。
    - 難しい専門用語を使わず、普通の言葉で案内する。
    - **デザイン:** 温かみのある「アイボリー」や「やさしいオレンジ(#FF8C00)」をアクセントに加え、無機質な法律ツールのイメージを払拭する。

## 2. 機能要件 (Functional Requirements)

### A. 検索・分類機能（フラットな6大ジャンル）
- 建築に偏らず、全ジャンルを平等に扱う。
- **分類UI:** 以下の6つ＋「すべて」のフィルタボタン（`st.pills`推奨）を用意。
    1.  🏠 土地・建物・環境
    2.  💼 ビジネス・産業
    3.  🍀 生活・民事
    4.  🤝 社会・労働・福祉
    5.  🚓 警察・刑事・防衛
    6.  🏛️ 国・行政・組織
- **挙動:** ボタンを押すと、そのジャンルの代表的な法令がリストに並ぶ。「すべて」なら検索窓で全法令から探せる。

### B. データ取得・変換（対NotebookLM仕様）
- **データソース:** e-Gov法令API (Version 1) `https://laws.e-gov.go.jp/api/1/`
    - ※`lawlists/1` で全リスト取得、 `lawdata/{LawId}` で条文取得。
- **画像処理（Image）:**
    - XML内の `ImageData` (Base64 ZIP) を解凍し、画像ファイル(.jpg/.png)を取り出す。
    - Markdown内に `![図](images/fig1.jpg)` の形式で埋め込む。
    - ダウンロードZIP内に `images` フォルダを含める。
- **表処理（Table）:**
    - XML内の `AppdxTable`（別表）などは、可能な限りMarkdownの表形式に変換する。
    - ※AI（NotebookLM）が読みやすいテキストデータを最優先する。

### C. お気に入りセット機能
- **名称:** 「いつものセット」
- **機能:** ユーザーが選択中の法令リストをJSON形式で「保存（ダウンロード）」および「読込（アップロード）」できる。

## 3. 出力仕様
- **形式:** ZIPファイル
- **ファイル名:** `法令とってきました_YYYYMMDD.zip` （日付入り）
- **構成:**
    - `法令データ/` フォルダ
        - `○○法.md`
        - `images/` (画像フォルダ)

## 4. 非機能要件
- **レスポンス:** 処理中は「法令を探しています...」等の温かいメッセージとプログレスバーを表示する。
- **キャッシュ:** `@st.cache_data` を使用し、APIへの負荷を軽減する。